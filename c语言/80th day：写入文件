#include <stdio.h>
#include <ctype.h>   // 包含 toupper 函数

int main(void) {
    FILE *fp;
    int ch;

    // 打开文件 test，以写方式创建；若存在则覆盖
    fp = fopen("test", "w");
    if (fp == NULL) {
        perror("fopen");  // 打印打开失败原因
        return 1;
    }

    printf("请输入字符串，以感叹号 ! 结束：\n");

    // 逐字符读取，直到遇到 '!'
    while ((ch = getchar()) != '!') {
        // 如果是小写字母，转换为大写；否则保持不变
        if (islower(ch)) {
            ch = toupper(ch);
        }
        // 写入文件
        fputc(ch, fp);
    }

    // 关闭文件
    fclose(fp);

    printf("已将转换后的内容写入文件 test\n");

    return 0;
}
